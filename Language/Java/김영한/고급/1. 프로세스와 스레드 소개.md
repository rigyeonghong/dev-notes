# 멀티태스킹과 멀티프로세싱

* 멀티태스킹 (sw)
	하나의 컴퓨터 시스템이 동시에 여러 작업 수행 능력.

* 시분할 (Time Sharing)
	* CPU 코어 1개 : 초당 수십억 이상 연산 수행.
	* 프로그램 실행 시간 분할해 여러 프로그램 동시 실행처럼 느껴짐

* 멀티프로세싱 (hw)
	2개 이상 프로세서를 사용해 여러 작업 동시 처리 기술.
	
# 프로세스와 스레드
![[Pasted image 20240718183909.png]]
* 프로세스 : 독립적 메모리 공간
	* 코드 섹션 : 실행할 프로그램 코드 저장
	* 데이터 섹션 : 전역 변수 및 정적 변수 저장
	* 힙 : 동적 할당 메모리
	* 스택 : 메서드 호출시 생성되는 지역변수, 반환 주소 저장 (in 스레드)

* 스레드 : 프로세스 내 실행되는 작업 단위
	* 공유 메모리 : 코드/데이터/힙
	* 개별 스택

* 프로그램 실행된다는 건?
	* os는 디스크 파일 덩어리 프로그램 -> 메모리 올려 : 프로세스
		* 코드가 한줄씩 실행되는 단위가 스레드

* 멀티프로세스 필요성
	* 스레드1: 영상 보기
	* 2 : 댓글

# 스레드와 스케줄링
* 스케줄링 : cpu 시간을 여러 작업에 나눠 배분하는 법

* os 내부 스케줄링 큐 존재.
	* 단일 코어 스케줄링
	![[Pasted image 20240718184701.png]]
	
	* 멀티 코어 스케줄링
	![[Pasted image 20240718184751.png]]

# 컨텍스트 스위칭
* 스레드 멈추는 시점 cpu 에서 사용하던 값을 메모리에 저장하고, 이후 다시 불러오는 과정
	ex. cpu 코어1 - 스레드1,2 : 컨텍스트 스위칭 비용 발생.

* `cpu 바운드 작업` : cpu +1
	* 연산 능력

* `I/O 바운드 작업` : cpu 코어 보다 많은 스레드 생성, 성능테스트로 cpu 최대 사용 숫자까지 생성
	* 디스크, nw, 파일 시스템 같은 입출력 작업
	* I/O 작업 완료될 때까지 cpu 대기
	* ex. db 쿼리 처리, 파일 읽기/쓰기, nw 통신